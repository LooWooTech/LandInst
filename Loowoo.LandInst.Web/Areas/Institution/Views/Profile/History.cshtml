@using Loowoo.LandInst.Model
@using Loowoo.LandInst.Common
@{
    ViewBag.Title = "历史信息";
    Layout = "~/Areas/Institution/Views/Shared/_Layout.cshtml";
    IEnumerable<Profile> list = ViewBag.List;
}
<table class="table table-bordered">
    <thead>
        <tr>
            <th>申请类型</th>
            <th style="width: 150px;">申请时间</th>
            <th style="width: 120px;">审批结果</th>
            <th style="width: 150px;">审批时间</th>
            <th style="width: 100px">查看</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in list)
        {
            var checkLog = Loowoo.LandInst.Manager.ManagerCore.Instance.CheckLogManager.GetCheckLog(item.ID, item.UserID, CheckType.Profile);
            <tr>
                <td>@(checkLog == null ? "年检审批" : checkLog.CheckType.GetDescription())</td>
                <td>@(item.CreateTime.ToString())</td>
                <td>@if (item.CheckResult.HasValue)
                    {
                        if (item.CheckResult.Value)
                        { 
                    <span class="label label-success">已通过</span>
                        }
                        else
                        {
                    <span class="label label-warning">没通过</span>
                        }
                    }
                    else
                    {
                    <span class="label label-default">未审批</span>
                    }</td>
                <td>
                    @(item.UpdateTime.HasValue ? item.UpdateTime.ToString() : null)
                </td>
                <td><a href="edit?id=@(item.ID)" class="btn btn-primary btn-xs">详细</a></td>
            </tr>
        }
    </tbody>
</table>
