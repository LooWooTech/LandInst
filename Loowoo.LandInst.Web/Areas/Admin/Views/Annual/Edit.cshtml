@using Loowoo.LandInst.Model
@{
    AnnualCheck model = ViewBag.Model;
    ViewBag.Title = model.ID > 0 ? "修改年审" : "编辑年审";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<h2>@(ViewBag.Title)</h2>
<form id="annualcheck-form" role="form" class="form-horizontal">
    <label class="control-label">名称</label>
    <input type="text" name="Name" class="form-control input-sm" value="@(model.Name)" />

    <label class="control-label">起始时间</label>
    <input type="text" name="StartDate" class="form-control input-sm datepicker" value="@(model.ID == 0 ? "" : model.StartDate.ToShortDateString())" />

    <label class="control-label">结束时间</label>
    <input type="text" name="EndDate" class="form-control input-sm datepicker" value="@(model.ID == 0 ? "" : model.EndDate.ToShortDateString())" />

    <label class="control-label">简介</label>
    <textarea name="summary" class="form-control input-sm">@(model.Summary)</textarea>

    <label class="control-label"></label>
    <button type="submit" class="btn btn-primary">保存</button>

</form>
<script>
    $(function () {
        $(".datepicker").datepicker();

        $("#annualcheck-form").submit(function () {
            var data = $(this).serialize();
            $.post("/admin/annual/edit?id=@(model.ID)", data, function (json) {
                if (json.result) {
                    alert("保存成功");
                    window.location.href = "/admin/annual/";
                }
            }, "json");
            return false;
        });
    });
</script>
