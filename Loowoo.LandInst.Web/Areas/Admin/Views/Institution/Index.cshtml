@using Loowoo.LandInst.Model
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    List<Loowoo.LandInst.Model.Institution> institutions = ViewBag.List;
}

<h2>机构管理</h2>
<form id="inst-search-form">
    <select name="businessType">
        <option value="0">全部</option>
        <option value="@((int)ApprovalType.Change)">变更</option>
        <option value="@((int)ApprovalType.Annual)">年审</option>
        <option value="@((int)ApprovalType.Register)">注册登记</option>
    </select>
    机构名称：
    <input type="text" />

    地区：
    <select name="city">
    </select>

    <input type="submit" class="btn btn-default" value="查询" />

    <input type="button" class="btn btn-primary" value="审批" />
</form>

<table class="table">
    <tr>
        <th>
            <input id="btn-select" type="checkbox" /></th>
        <th>机构名称</th>
        <th>类别</th>
        <th>法人代表</th>
        <th>所在地</th>
        <th>手机号</th>
        <th>工商注册号</th>
        <th>详细</th>
    </tr>
    @foreach (var inst in institutions)
    { 
        <tr>
            <td><input type="checkbox" name="ID" value="@(inst.ID)" /></td>
            <td>@(inst.Name)</td>
            <td>@(inst.Type.ToString())</td>
            <td>@(inst.LegalRepresentative)</td>
            <td>@(inst.City)</td>
            <td>@(inst.MobilePhone)</td>
            <td>@(inst.RegistrationNo)</td>
            <td><a href="/admin/institution/profile?id=@(inst.ID)">查看</a></td>
        </tr>
    }
    <tr>
        <td colspan="8">
            @Html.Partial("_pagination",ViewBag.Page as object)
        </td>
    </tr>
</table>
<script>
    $(function () {

        $("#btn-select").click(function () {
            $("input[type='checkbox']").prop('checked', this.checked);
        });


    });
</script>